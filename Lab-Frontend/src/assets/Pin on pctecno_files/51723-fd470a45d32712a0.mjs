(self.modernJsonp=self.modernJsonp||[]).push([["51723"],{95664:function(e,n,t){t.d(n,{$K:()=>l,dh:()=>a,ry:()=>o,xX:()=>s});let a=e=>/instagram/i.test(e||""),o=e=>a(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),i="[Pinterest/Android]",l=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(i),s=e=>(e||"").includes(i)},589172:function(e,n,t){t.d(n,{Z:()=>o});var a=t(501010);function o(e){let{expName:n,anyEnabled:t,group:o}=function({experimentsClient:e,skipActivation:n}){let{checkExperiment:t}=e,a=t("web_masonry_v2",{dangerouslySkipActivation:n});return a.group?{expName:"web_masonry_v2",...a}:{expName:"",anyEnabled:!1,group:""}}({experimentsClient:(0,a.Z)(),skipActivation:e?.skipActivation??!1});return{expName:n,anyEnabled:t,group:o,isMeasureAllEnabled:"enabled_measure_all"===o||"enabled_measure_all_impression_fix"===o,isImpressionFixEnabled:"control_impression_fix"===o||"enabled_impression_fix"===o||"enabled_measure_all_impression_fix"===o}}},79271:function(e,n,t){t.d(n,{Fw:()=>b,OC:()=>m,ZP:()=>S});var a=t(667294),o=t(230201),i=t(589172),l=t(609252),s=t(774838),r=t(739405),d=t(281213),u=t(2061),_=t(767415),p=t(177433);let c=0,m=()=>c,g={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},h=({events:e,startTime:n,endTime:t})=>e?.filter(e=>e>=n&&e<=t)||[];function S({carouselData:e,closeupImpressionType:n,closeupNavigationType:t,componentType:m,contextLogData:S,clientTrackingParams:b,duploShouldTrackPinEvents:y,elementType:w,impressionAuxFields:v,inImpressionExp:I,impressionType:E,impressionsFramework:L,isPaused:O,loggingId:C,objectIdStr:P,slotIndex:T,trackCarousel:N,viewData:f,viewParameter:U,viewType:M,isPromoted:k,storyPinProductEventData:x}){let{logContextEvent:R}=(0,o.u)(),{logMrcVideoAdEventOnPlay:A}=(0,d.H)(),{logStat:G}=(0,u.Yg)(),D=L||l.Z,F=(0,a.useRef)(null),W=(0,a.useRef)(e=>{});W.current=a=>{let o=g[E],i=o.idType,l={clientTrackingParams:b,endTime:a.endTime,[i]:C,slotIndex:T,time:a.startTime,renderDuration:a.endTime-a.startTime,type:n,...v,forcedExit:"removed"===a.forcedExit?0:void 0};if("Pin"===E){c+=1;let e=[],n=a.visibleEvents||new Map,t=a.hiddenEvents||new Map;(v&&v.isPromoted||k)&&[1,50,80,2,102].forEach(o=>{let i=h({events:n.get(o),startTime:a.startTime,endTime:a.endTime}),l=h({events:t.get(o),startTime:a.startTime,endTime:a.endTime});i.forEach(n=>{e.push({type:o,time:n||0,visible:!0})}),l.forEach(n=>{e.push({type:o,time:n||0,visible:!1})})}),l={...l,pinCellWidth:a.pinCellWidth||0,pinCellHeight:a.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,n)=>e.time-n.time)}}let s={component:m,object_id_str:P,view_type:M,view_data:f||{},view_parameter:U};if(N)e&&N&&R({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...l,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...s,aux_data:{...S}});else{let e={clientTrackingParams:b,event_type:o.eventType,...s,element:w,event_data:{[o.impressionType]:"Story"===E?l:[l],...x?{storyPinProductEventData:x}:{}},aux_data:{closeup_navigation_type:t,...S}};R(e),A(e)}y&&G("log_pin_impression")};let{expName:B,group:H}=(0,i.Z)({skipActivation:!0}),$=(0,r.ZP)(),q=(0,p.Zv)(),{isAuthenticated:V}=(0,s.B)(),K=(0,a.useCallback)(()=>{let e=!1;try{let{current:n}=F;if(n instanceof HTMLElement&&(!k||n.getElementsByTagName("img").length>0)){let t=D.start(n);t.onExitViewport(W.current).setDebugId(C||"unknown"),y&&t.onEnterViewport(()=>{G("log_pin_impression_track_enter_viewport")}),e=!0,H&&(0,_.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:$,experimentName:B,group:H,handlerId:q,isAuthenticated:V,slotIndex:T??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}y&&G("log_pin_impression_track",{didStartTracking:e})},[F.current]);return(0,a.useEffect)(()=>(I&&!D.inExperiment&&D.setExperimentStatus(!0),O||K(),()=>{let{current:e}=F;e instanceof HTMLElement&&(!k||e.getElementsByTagName("img").length>0)&&D.stop(e)}),[O,K]),F}let b=({children:e,...n})=>e({impressionTrackerRef:S(n)})},331357:function(e,n,t){t.d(n,{J:()=>i,U:()=>g});var a=t(27399),o=t(767415);let i="nic_v4",l=`${i}=1a`,s=`${i}=1b`,r=[l,s],d=["invite_code","invite","board_invite_code","sender"],u=null,_=e=>!!d.find(n=>e.includes(n)),p=e=>{let n;return e.pathname.includes("/pin/")&&!_(e.search)&&(n=e.search,!r.find(e=>n.includes(e)))},c=async e=>{let{resource_response:n}=await a.Z.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();if(!n)return(0,o.nP)(`${i}.social_tracking_pin_non_invite.no_resource_response`),"";{let e=encodeURIComponent(n.data);return(0,o.nP)(`${i}.social_tracking_pin_non_invite.encrypted.${e?"true":"false"}`),e}},m=(e,n,t=!1,a)=>{if(!p(e))return;let r=t?"mweb":"web";if(!n)return void(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.no_encrypted_id`);(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.attempt`);try{let d=((e,n,t)=>{let a=e.search?"&":"?";return e.pathname+e.search+(a+(t?s:l)+n)})(e,n,t||!1);(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.success`),a(d)}catch{(0,o.nP)(`${r}.${i}.social_tracking_pin_non_invite.insert.caught_exception`)}},g=(e,n,t,a,l)=>{let s=t?"mweb":"web";(0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.attempt`);try{let r;!t&&a&&p(e)?((0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.search_string_eligible`),((e,n,t=!1,a)=>{u?m(e,u,t,a):(async()=>{let o=await c(n);u=o,m(e,o,t,a)})()})(e,n,t,l)):(r=e.search,!_(r)&&!r.includes("sender")&&r.includes(i)&&(0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.search_string_land`))}catch{(0,o.nP)(`${s}.${i}.social_tracking_pin_non_invite.caught_exception`)}}},456871:function(e,n,t){t.d(n,{Z:()=>_});var a=t(312048),o=t(331357),i=t(173874),l=t(774838),s=t(843716),r=t(900907),d=t(986523),u=t(767415);function _(){let e,{isBot:n,isSocialBot:t,referrerFromCookie:_,referrerFromHeader:p,countryFromHostName:c,countryFromIp:m,regionFromIp:g,isAuthenticated:h}=(0,l.B)(),S=(0,a.TH)(),b=(0,d.Z)(),y=new URLSearchParams(S.search),w=!n&&!!y.get("utm_pai"),v=y.get("utm_source"),I=!n&&!t&&(0,i.ey)(S),E=(0,r.Z)({countryFromHostName:c||"",countryFromIp:m||"",regionFromIp:g||"",isAuthenticated:h}),L=p||E&&_||"";e=b||!E?L:(0,s.an)(L);let O=!1,C=!n&&!t&&v&&["email",String(31)].includes(v),P=!n&&!t&&v&&["fb"].includes(v),T="offsite"===v,N=!n&&!t&&!!(e&&(/facebook/.test(e)||/fb/.test(e))),f=!n&&!t&&!!(e&&(/twitter/.test(e)||/tw/.test(e)));I&&(0,u.nP)("unauth.entry_channel.invite_code",{sampleRate:1}),C&&(0,u.nP)("unauth.entry_channel.email_utm_source",{sampleRate:1}),P&&(0,u.nP)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),T&&(0,u.nP)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),N&&(0,u.nP)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),f&&(0,u.nP)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),O=(0,s.Xn)(e);let U=!n&&O,M=!!y.get(o.J),k=!!y.get("twa_type")||e&&e.startsWith("android-app://com.pinterest.twa"),x=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(e=>null!==y.get(e))||!!e||M||k;return{isPaid:w,isInvite:I,utmSource:v,referrer:e,isSocial:I,isDirect:!n&&!w&&!I&&!U&&!x,isSEO:U,isBrowserStorageAllowed:E,isOffsite:T,isBot:n||t}}},843716:function(e,n,t){t.d(n,{Xn:()=>g,Yf:()=>y,an:()=>h});var a=t(173874),o=t(138482),i=t(575820);let l="BING",s="GOOGLE",r="YAHOO",d="YANDEX",u="RAKUTEN",_="NAVER",p="AMP_CACHE",c="DUCKDUCKGO",m=[s,l,r,d,u,_,p,c];function g(e){return m.includes(function(e){let{hostname:n}=(0,i.Qc)(e,!0);if(n&&e){if(n.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return s;else if(n.includes("bing."))return l;else if(n.includes("yahoo."))return r;else if(n.includes("yandex."))return d;else if(n.includes("rakuten."))return u;else if(n.includes("naver."))return _;else if(n.includes("duckduckgo."))return c;else if(n.includes(".cdn.ampproject.org"))return p}return""}(e))}function h(e){return e||"undefined"!=typeof document&&document.referrer||""}let S=e=>"/"!==e[e.length-1]?`${e}/`:e,b=e=>{let n=S(e),t=(0,a.ll)({url:n});return(0,a.L6)(t)?"PIN":(0,a.am)(t)?"BOARD":(0,o.Z)(t)?"PROFILE":(0,a.bo)(t)?"TODAY":(0,a.z_)(t)?"IDEA":(0,a.R$)(t)?"SHOPPING":"UNKNOWN"},y=({country:e,language:n,isBot:t,hostname:a,pathname:o})=>({domain:a,country:e,language:n,currentUrl:o,pageType:b(o),referrer:document.referrer,isBot:t,links:(({selector:e,skipExternal:n})=>{let t=Array.from(document.querySelectorAll(e)),a={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},o=new Set;return t.forEach(e=>{let t=e.getAttribute("href");if(!t||t.startsWith("#")||n&&t.startsWith("http")&&!t.includes(window.location.hostname))return;let i=S(t);if(o.has(i))return;o.add(i);let l=b(i);"PIN"===l?a.pin.push(i):"BOARD"===l?a.board.push(i):"PROFILE"===l?a.user.push(i):"TODAY"===l?a.today.push(i):"IDEA"===l?a.idea.push(i):"SHOPPING"===l&&a.shopping.push(i)}),a})({selector:"a[href]",skipExternal:!0})})},434291:function(e,n,t){t.d(n,{m:()=>o,r:()=>i});var a=t(815271);function o(e,n){(0,a.Z)("ðŸŽ¯ ENGAGEMENT_SCORE_CALCULATED",{trigger:e,...n})}function i(e,n){(0,a.Z)("desktop"===e?"DESKTOP_UPSELL_DECISION":"MOBILE_UPSELL_DECISION",n)}},116412:function(e,n,t){t.d(n,{U:()=>o,a:()=>i});var a=t(935833);function o({PES:e,NUS:n,conversionIntentLevel:t,triggerAction:o,deviceType:i}){(0,a.My)("engagement_score.calculated",{engagement_score:e,upsell_negative_score:n,user_intent_bucket:t,upsell_type_tag:"conversion",trigger_action:o,device_type:i})}function i({upsellType:e,decision:n,intentLevel:t,PES:o,NUS:i,experimentVariant:l}){(0,a.My)("upsell.decision_with_intent",{upsell_type:e,decision:n,intent_level:t,pes:o,nus:i,experiment_variant:l})}},184285:function(e,n,t){t.d(n,{HZ:()=>S,ZP:()=>T,e_:()=>P,pT:()=>I});var a=t(667294),o=t(581722),i=t(15881),l=t(95664),s=t(79271),r=t(456871),d=t(774838),u=t(418282),_=t(270922),p=t(739405),c=t(658375),m=t(767415);let g=Date.now(),h=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),S=()=>(0,o.v9)(e=>e.upsell?.modal),b=()=>(0,s.OC)(),y=()=>Date.now()-g,w=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),v=()=>(0,o.v9)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),I=()=>(0,o.v9)(e=>e.upsell?.mWebSignupModal),E=()=>{let e=(0,d.B)(),n=(0,r.Z)(),t=(0,p.ZP)();return(0,a.useMemo)(()=>(0,_.T9)(e,n,t),[e,n,t])},L=Object.freeze(["CO","ID"]),O=e=>L.includes(e),C=e=>{if(!(0,l.ry)(e))return!1;let n=(0,u.Nl)();return n.getItem(i.QV)||((0,m.nP)("mobile_signup_modal.rules.suppress_for_social_in_app_browser"),n.setItem(i.QV,"1")),!0},P=({isModalShown:e,isUnauthSharingModalsShown:n,modalHasShown:t,country:a,userAgent:o})=>!e&&!(n||t&&O(a)||(0,c.P)()||C(o));function T(){let e=h(),n=(0,o.v9)(e=>e.upsell?.mWebSignupModal.modal),t=(0,o.v9)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount),i=w();return{isModalShown:e,modal:n,upsellEligibleNavigationCount:t,isUnauthSharingModalsShown:i,modalHasShown:v(),sessionContext:E(),isUpsellEnabledGlobally:(()=>{let e=h(),n=w(),t=v(),o=E();return(0,a.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:n,sessionContext:t})=>{if(!t)return!1;let{country:a,userAgent:o}=t;return e||n&&O(a)||(0,c.P)()||C(o)})({isUnauthSharingModalsShown:n,modalHasShown:t,sessionContext:o}),[e,n,t,o])})(),getPinImpressionCount:b,getSessionDuration:y}}},432414:function(e,n,t){t.d(n,{ZW:()=>y,Gk:()=>b,YM:()=>w});var a=t(173874),o=t(138482),i=t(434291),l=t(116412),s=t(730056);let r="dweb_eoq_q3_standard",d="dweb_eoq_q3_advanced",u="mweb_eoq_q3_standard",_="mweb_eoq_q3_advanced",p=[{bundleId:"dweb_eoq_q3_standard",experimentKey:r,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:d,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:u,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:_,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}}];function c(e,n){let t=p.filter(t=>{if(!t.active||!t.overrides[e])return!1;switch(t.experimentKey){case r:return n("dweb_eoq_q3_standard").anyEnabled;case d:return n("dweb_eoq_q3_advanced").anyEnabled;case u:return n("mweb_eoq_q3_standard").anyEnabled;case _:return n("mweb_eoq_q3_advanced").anyEnabled;default:return!1}});return t[t.length-1]?.overrides[e]}let m=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:n}){return t=>{let{checkExperiment:a,session:o}=t,i=a&&c(e,a)?.evaluateContextOverride||{},l=i[o?.channel??"default"]||i.default||{};return n((0,s.Z)(t,l))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:n}){return({action:t,state:a,decision:o})=>{let i=n({action:t,state:a,decision:o});if(!("payload"in t&&"object"==typeof t.payload&&null!==t.payload&&"checkExperiment"in t.payload))return i;let l=c(e,t.payload.checkExperiment)?.stateOverride||{};return 0===Object.keys(l).length?i:(0,s.Z)(i,l)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var g=t(671220);let h=(e,n)=>{let t={enabled_1:["high","medium"],enabled_2:["high"],enabled_3:["medium"],enabled_4:["medium","low"]}[n];return!!t&&t.includes(e||"unknown")},S=e=>{if(!e)return!1;let n=e("mweb_feature_upsell_copy_visual_combination_v2");if("enabled_copy_2"===n.group)return!0;if("control"===n.group)return!1;let t=e("mweb_feature_upsell_copy_visual_combination_v1");return["enabled_copy_1","enabled_copy_2","enabled_tone_filter_1","enabled_tone_filter_2","enabled_visual_search_1","enabled_visual_search_2","enabled_create_board_1","enabled_create_board_2"].some(e=>t.group===e)},b={shouldShowCloseupNavigationalModal:m({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:n,checkExperiment:t})=>!t?.("pc_no_navigational_upsell").anyEnabled&&(e??0)>=4&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:m({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:n})=>({...n,pinSaveCount:n.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}),shouldShowNavigationalModal:m({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:n,navigationalPagesViewThresholdDesktop:t,checkExperiment:a})=>!a?.("pc_no_navigational_upsell").anyEnabled&&e.length>=(t??4)&&!n,getNextState:({state:e,action:n})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${n.payload.containerPage}`,container:n.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowNavigationalModalIntentBased:m({id:"desktop_navigational_modal_intent_trigger",evaluate:({navigationalPagesUpsellSeen:e,engagementScore:n,checkExperiment:t})=>{let a=t?.("engagement_score_v0_dweb");if(!a?.anyEnabled||e)return!1;let{conversionIntentLevel:o,PES:s,NUS:r}=n||{},d=h(o,a.group);return(0,i.r)("desktop",{variant:a.group,decision:d?"SHOW":"SKIP",intentLevel:o,PES:s||0,NUS:r||0,reason:d?`Intent ${o} in allowed list`:`Intent ${o} NOT in allowed list`}),(0,l.a)({upsellType:"navigation_desktop",decision:d?"show":"skip",intentLevel:o||"unknown",PES:s||0,NUS:r||0,experimentVariant:a.group}),d},getNextState:({state:e,action:n})=>{let{conversionIntentLevel:t,PES:a,NUS:o}=e.engagementScore||{};return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_intent_${t}_pes_${a||0}_nus_${o||0}`,container:n.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0}}}),shouldShowSignupModalOnCloseUpClick:m({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}),shouldShowSignupModalOnClickContextMenuSaveButton:m({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:n})=>!e?.isShown&&!n,getNextState:({action:e,state:n})=>{let t;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...n,modal:{isShown:!0,displayProps:t},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:m({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:n})=>!e?.isShown&&!n,getNextState:({action:e,state:n})=>{let t;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...n,modal:{isShown:!0,displayProps:t},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:m({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:n,modal:t})=>!!((e||n)&&!t?.isShown),getNextState:({action:e,state:n})=>{let t;return t=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId},{...n,modal:{isShown:!0,displayProps:t},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:m({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:n})=>!!(e&&!n?.isShown),getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource})}),shouldShowSignupModalOnFollowButtonClick:m({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:n})=>!e?.isShown&&!n,getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:m({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:m({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:m({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:m({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:n})=>!e?.isShown&&!n,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:m({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:n=0})=>!e?.isShown&&(2===n||n%5==0),getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:m({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:n,checkExperiment:t})=>!!e&&!n&&!!(t?.("ce_dweb_unauth_splp_blocking").anyEnabled||t?.("ce_dweb_unauth_splp_blocking_12s").anyEnabled),getNextState:({action:e,state:n})=>({...n,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===g.Fy?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},y={shouldShowSaveEducationPopover:m({id:"mobile_save_education_popover_trigger",evaluate:({saveEducationPopoverEverShown:e,checkExperiment:n})=>{if(e)return!1;let{group:t}=n?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_group_board")},getNextState:({state:e})=>({...e,showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}),shouldShowReplyToSenderSheet:m({id:"mobile_reply_to_sender_sheet_trigger",evaluate:({replyToSenderSheetEverShown:e,checkExperiment:n})=>{if(e)return!1;let{group:t}=n?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_reply_to_sender")},getNextState:({state:e})=>({...e,showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}),shouldAllowUnauthSave:m({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:n,currentUnauthSaves:t=0,mobileUnauthSaveThreshold:a})=>!n&&!e&&t<(a??2),getNextState:({action:e,state:n})=>({...n,mWebSignupModal:{...n.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(n.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:n.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageNavigationalModal:m({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:n,isModalCurrentlyShown:t,learningUpsellScenario:a,forceShowModal:o})=>{let i=a&&n&&!t&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return a&&(o||!!i)},getNextState:({action:e,state:n})=>({...n,mWebSignupModal:{...n.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(n.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:n.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:n,isLearningAppUpsellShown:t})=>n||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:t,newState:!t}},shouldShowNavigationUpsell:m({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:n,newLocation:t,isNavigationFromSwipe:a,currentNavigationCount:o,hasSeenModal:i,pageThreshold:l,isWashDismissible:s,canShowSignupModalOnRouteChange:r,navigationalPagesViewThresholdMobile:d,checkExperiment:u})=>{if(u?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let _=d||l||4;return n?{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1}:e&&!a&&t&&r?.(t)?!((o??0)>=_)||i?{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0}:{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${_}_${o}`,allowCloseOnOutsideClick:s,headingType:S(u)?"mweb_feature_upsell_copy_visual_combination_v1":"none"}:{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1}},getNextState:({state:e,decision:n})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:n?.headingType??"none",trigger:{attributionLabel:n?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!n?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowNavigationUpsellIntentBased:m({id:"mobile_navigation_upsell_intent",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:n,newLocation:t,isNavigationFromSwipe:a,hasSeenModal:o,canShowSignupModalOnRouteChange:s,engagementScore:r,checkExperiment:d})=>{let u=d?.("engagement_score_v0_mweb");if(!u?.anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(n)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!e||a||!t||!s?.(t))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(o)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let{conversionIntentLevel:_,PES:p,NUS:c}=r||{},m=h(_,u.group);return((0,i.r)("mobile",{variant:u.group,decision:m?"SHOW":"SKIP",intentLevel:_,PES:p||0,NUS:c||0,reason:m?`Intent ${_} in allowed list`:`Intent ${_} NOT in allowed list`}),(0,l.a)({upsellType:"navigation_mobile",decision:m?"show":"skip",intentLevel:_||"unknown",PES:p||0,NUS:c||0,experimentVariant:u.group}),m)?{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_intent_${_}_pes_${p||0}_nus_${c||0}`,allowCloseOnOutsideClick:!0,headingType:S(d)?"mweb_feature_upsell_copy_visual_combination_v1":"none"}:{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0}},getNextState:({state:e,decision:n})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:n?.headingType??"none",trigger:{attributionLabel:n?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!n?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowOnLandUpsell:m({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:n,hasSeenNavUpsell:t,location:i,userAgent:l,showUnauthMwebSocialDefaultModalUpsell:s,isSocialInAppBrowser:r,shouldTriggerOnLand:d=!1})=>{let u;if(e?.("pc_no_navigational_upsell").anyEnabled||!n||t||!(i&&((0,a.L6)(i)||(0,a.am)(i)||(0,o.Z)(i)||(0,a.En)(i)||(0,a.ey)(i))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let _=!(r?.(l)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&s;if(!s&&!d)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!_&&S(e);if("social"==(u=_?"social":p?"mweb_feature_upsell_copy_visual_combination_v1":"none")&&e){let n=e("ce_mweb_visual_plp_upsell");if(n.anyEnabled)switch(n.group){case"enabled_1":u="social_visual_1";break;case"enabled_2":u="social_visual_2";break;case"enabled_3":u="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:_,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:i,oldLocation:i},headingType:u}}},getNextState:({state:e,decision:n})=>{let{modalConfig:t}=n;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:t?.headingType,trigger:{attributionLabel:t?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:m({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:n,modal:t})=>(e||n)&&!t?.isShown,getNextState:({action:e,state:n})=>{let{inMwebDownloadCTAExp:t,showDownloadCloseupIcon:a,attributionLabelSource:o}=e.payload,i={trigger:{attributionLabel:`click_${o}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:t||a?"download_limit_reached":"none"};return{...n,mWebSignupModal:{...n.mWebSignupModal,modal:{isShown:!0,displayProps:i,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:m({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:n})=>({...n,mWebSignupModal:{...n.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(n.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:n.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},w={desktop:b,mobile:y}},671220:function(e,n,t){t.d(n,{dn:()=>A,UA:()=>V,ub:()=>ea,EH:()=>eu,Ik:()=>N,mV:()=>R,OU:()=>_,Gh:()=>g,LL:()=>eh,Li:()=>es,jB:()=>z,G5:()=>ec,CC:()=>eq,F8:()=>eI,Ue:()=>$,t:()=>eQ,h4:()=>H,g_:()=>Q,BF:()=>er,rA:()=>f,aj:()=>eD,qD:()=>eN,IS:()=>eW,it:()=>k,Yr:()=>W,Vi:()=>F,by:()=>S,wK:()=>X,i8:()=>v,K7:()=>m,GY:()=>eO,vY:()=>el,HK:()=>y,yC:()=>eA,f$:()=>Y,qs:()=>Z,Fy:()=>D,QG:()=>I,CH:()=>eG,WE:()=>ew,qT:()=>b,Dk:()=>ei,Bh:()=>K,qq:()=>eH,Nx:()=>L,$S:()=>O,Lu:()=>ee,k7:()=>ef,Qm:()=>eR,Pp:()=>P,Sy:()=>et,b9:()=>em,z1:()=>en,$y:()=>u,tP:()=>E,Zr:()=>M,sg:()=>J,QC:()=>eT,Hm:()=>eg,FV:()=>eb,o9:()=>eM,MZ:()=>eV,V9:()=>q,AS:()=>c,kd:()=>U,pp:()=>p,QA:()=>ep,tW:()=>ev,v2:()=>eE,Jw:()=>e$,w$:()=>eo,Pu:()=>eF,gU:()=>eZ,cD:()=>eS,P9:()=>C,YT:()=>eB,pZ:()=>ek,dL:()=>e_,XE:()=>eP,Ff:()=>eU,tA:()=>B,TQ:()=>j,Q4:()=>w,gH:()=>x,aJ:()=>G,C5:()=>ed,Aw:()=>ex,xY:()=>ey,Dw:()=>eK,Bi:()=>T,ap:()=>eL,ht:()=>eC,mX:()=>h});var a=t(95664),o=t(935833),i=t(184285),l=t(432414);let s=e=>{let{modal:n,mWebSignupModal:t,appUpsells:a}=e;return!!(n.isShown||t.modal.isShown||a.learningUpsell?.isShown||a.iabAppUpsell?.isShown)};var r=t(932921),d=t(767415);let u="PROCESS_MOBILE_NAVIGATION_CHANGE",_="SET_UPSELL_REASON",p="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",m="UPS_EVENT_DESKTOP_MODAL_SHOW",g="UPS_EVENT_DESKTOP_MODAL_DISMISSED",h="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",S="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",b="TRIGGER_SCROLL_DOWN_UPSELL",y="CLEAR_SCROLL_DOWN_UPSELL",w="DISMISS_BOTTOM_RIGHT_BANNER",v="TRIGGER_SAVE_EDUCATION_POPOVER",I="CLEAR_SAVE_EDUCATION_POPOVER",E="TRIGGER_REPLY_TO_SENDER_SHEET",L="CLEAR_REPLY_TO_SENDER_SHEET",O="CLICK_CLOSEUP_UPSELL",C="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",P="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",T="CLICK_FOLLOW_BUTTON_UPSELL",N="CLICK_FOLLOWING_BUTTON_UPSELL",f="CLICK_FOLLOWERS_BUTTON_UPSELL",U="CLICK_COMMENT_COMPOSER_UPSELL",M="CLICK_PIN_LINK_UPSELL",k="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",x="RECORD_NAVIGATIONAL_PAGE",R="SET_INITIAL_SESSION_CONTEXT",A="RESET_UPSELL_TRIGGER_STATE",G="RECORD_SOCIAL_PIN_LANDING_PAGE",D="TRIGGER_SOCIAL_DELAY_MODAL",F="TRIGGER_SOCIAL_SCROLL_MODAL",W="SHOW_MOBILE_SIGNUP_MODAL",B="DISMISS_MOBILE_SIGNUP_MODAL",H="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",$="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",q="HIDE_UNAUTH_SHARING_MODALS",V="SHOW_UNAUTH_SHARING_MODALS",K="RESTORE_FROM_LOCAL_STORAGE",Q="MAIN_PIN_IMAGE_CLICK_MOBILE",Z="ON_LAND_UPSELL_MOBILE",Y="SET_LEARNING_UPSELL_VISIBILITY",X="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",j="DISMISS_MOBILE_FLOATING_UPSELL",J="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",z="INCREMENT_PIN_SAVE_COUNT",ee="DECREMENT_PIN_SAVE_COUNT",en="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",et="SET_UNAUTH_DOWNLOAD_COUNT",ea="UPS_EVENT_PIN_SAVE_MOBILE",eo="SET_REFERRED_APP_UPSELL_STATE",ei=e=>({type:K,payload:{upsellEligibleNavigationCount:e}}),el=e=>({type:_,payload:{upsellReason:e}}),es=(e,n,t,a,o)=>({type:p,payload:{pinId:e,seoUrl:n,componentType:t,viewParameter:a,checkExperiment:o}}),er=(e,n)=>({type:c,payload:{pinId:e,attributionLabel:n}}),ed=()=>({type:g}),eu=()=>({type:w}),e_=e=>({type:m,payload:{displayProps:e}}),ep=()=>({type:O}),ec=(e,n,t)=>({type:C,payload:{pinId:e,attributionLabelSource:n,signupToLoginExpGroup:t}}),em=(e,n)=>({type:T,payload:{isIdeaPin:e,isContextualFollowEnabled:n}}),eg=(e,n,t,a)=>({type:h,payload:{pinId:e,attributionLabelSource:n,signupToLoginExpGroup:t,checkExperiment:a}}),eh=({pinId:e,attributionLabelSource:n,downloadAllowedCallback:t})=>({checkExperiment:a,sessionContext:i})=>(i,l)=>{let d=l(),{limitReached:u,oldCount:_,newCount:p}=(0,r.H)(a,{downloadCount:d.upsell?.unauthDownloadCount??0,upsellDispatch:i,isAuthenticated:d.session?.isAuthenticated??!1});(0,o.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:n,limitReached:u,oldCount:_,newCount:p}),i({type:S,payload:{pinId:e,attributionLabelSource:n,limitReached:u,checkExperiment:a}}),s(l().upsell)||t()},eS=({pinId:e,attributionLabelSource:n,inImmediateUpsellGroup:t,inDwebSwapDownloadUpsellExp:a,downloadAllowedCallback:i,showDownloadIconForRelatedPins:l,inDwebDownloadCTAExp:d})=>({checkExperiment:u,sessionContext:_})=>(_,p)=>{let c=p(),{limitReached:m,oldCount:g,newCount:h}=(0,r.H)(u,{downloadCount:c.upsell?.unauthDownloadCount??0,upsellDispatch:_,isAuthenticated:c.session?.isAuthenticated??!1});l?(0,o.My)("dweb.unauth.action_bar.download_image",{attributionLabelSource:n,limitReached:m,oldCount:g,newCount:h}):d?(0,o.My)("dweb.unauth.download_cta.download_image",{attributionLabelSource:n}):a?(0,o.My)("dweb.unauth.swap_download_upsell.download_image",{attributionLabelSource:n}):(0,o.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:n,limitReached:m,oldCount:g,newCount:h}),_({type:P,payload:{pinId:e,attributionLabelSource:n,limitReached:m,inImmediateUpsellGroup:t,inDwebSwapDownloadUpsellExp:a,checkExperiment:u}}),s(p().upsell)||i()},eb=()=>({type:N}),ey=()=>({type:f}),ew=()=>({type:U}),ev=e=>({type:M,payload:{count:e}}),eI=()=>({type:k}),eE=(e,n)=>({checkExperiment:t,sessionContext:a})=>o=>{o({type:x,payload:{pageUniqueKey:e,containerPage:n,checkExperiment:t,sessionContext:a}})},eL=e=>({type:R,payload:{sessionContext:e}}),eO=(e,n)=>({type:G,payload:{inviter:e,containerPage:n}}),eC=e=>({checkExperiment:n})=>t=>{t({type:D,payload:{containerPage:e,checkExperiment:n}})},eP=e=>({checkExperiment:n})=>t=>{t({type:F,payload:{containerPage:e,checkExperiment:n}})},eT=()=>({type:I}),eN=()=>({checkExperiment:e,sessionContext:n})=>t=>{let{group:a}=e?.("ce_mweb_unauth_social_feature_education")||{};a?.startsWith("enabled_group_board")?t((({checkExperiment:e})=>n=>{n({type:v,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:n})):a?.startsWith("enabled_reply_to_sender")&&t((({checkExperiment:e})=>n=>{n({type:E,payload:{checkExperiment:e}})})({checkExperiment:e,sessionContext:n}))},ef=()=>({type:L}),eU=e=>({type:W,payload:e}),eM=()=>({type:B}),ek=e=>({type:H,payload:{topInterest:e}}),ex=()=>({type:$}),eR=()=>({type:q}),eA=()=>({type:V}),eG=e=>({checkExperiment:n,sessionContext:t})=>(a,i)=>{a({type:u,payload:{...e,checkExperiment:n,sessionContext:t}}),s(i().upsell)||(0,o.My)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},eD=e=>({checkExperiment:n,sessionContext:t})=>(s,r)=>{let u=r().upsell,{country:_,userAgent:p}=t,c=l.YM.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:n,isUpsellEnabledGlobally:(0,i.e_)({isModalShown:u.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:u.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!u.mWebSignupModal.modalHasShown,country:_,userAgent:p}),hasSeenNavUpsell:u.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:p,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:a.ry,session:t});c.shouldShowModal&&c.modalConfig&&((0,o.My)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,d.nP)("unauth.mweb.social.pin.upsell",{sampleRate:1}),s({type:Z,payload:{decision:c,checkExperiment:n}}))},eF=e=>({checkExperiment:n,sessionContext:t})=>(a,i)=>{let s=i().upsell,r=!!s.appUpsells.learningUpsell?.isShown,d=l.YM.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:n,session:t,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),u=l.YM.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!d,isLearningAppUpsellShown:r});d?(0,o.My)("mweb.nav.upsell.show.main_pin_image_click"):u.shouldToggleAppUpsell?u.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),a({type:Q,payload:{conversionDecision:d,appUpsellDecision:u,checkExperiment:n,pinId:e.pinId}})},eW=({isShown:e,isDismissedByUser:n=!1})=>({type:Y,payload:{isShown:e,isDismissedByUser:n}}),eB=({pinId:e,attributionLabelSource:n,inImmediateUpsellGroup:t,inMwebDownloadCTAExp:a,showDownloadCloseupIcon:i,downloadAllowedCallback:l})=>({checkExperiment:d,sessionContext:u})=>(u,_)=>{let p=_(),{limitReached:c,oldCount:m,newCount:g}=(0,r.H)(d,{downloadCount:p.upsell?.unauthDownloadCount??0,upsellDispatch:u,isAuthenticated:p.session?.isAuthenticated??!1});a?(0,o.My)("mweb.unauth.download_cta.download_image",{attributionLabelSource:n}):i?(0,o.My)("mweb.unauth.download_closeup_icon.download_image",{attributionLabelSource:n}):(0,o.My)("mweb.unauth.context_menu.download_image",{attributionLabelSource:n,limitReached:c,oldCount:m,newCount:g}),u({type:X,payload:{pinId:e,attributionLabelSource:n,limitReached:c,inImmediateUpsellGroup:t,inMwebDownloadCTAExp:a,showDownloadCloseupIcon:i,checkExperiment:d}}),s(_().upsell)||l()},eH=({isDismissedByUser:e=!1}={})=>({type:j,payload:{isDismissedByUser:e}}),e$=(e,n)=>({type:J,payload:{isIdeaPin:e,isContextualFollowEnabled:n}}),eq=()=>({type:ee}),eV=()=>({type:en}),eK=e=>({type:et,payload:{count:e}}),eQ=e=>({checkExperiment:n,sessionContext:t})=>(t,a)=>{let o=a().upsell;l.YM.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:n,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.unauthSavedPinsStore.pins.length})&&!o.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),t({type:z}),e.handleShowNavFooter(t,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):t({type:ea,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:n}})},eZ=({isShown:e,appUpsellType:n,isBlocking:t})=>({type:eo,payload:{isShown:e,appUpsellType:n,isBlocking:t}})},270922:function(e,n,t){t.d(n,{A4:()=>r,T9:()=>d,qo:()=>s,y1:()=>l});var a=t(95664),o=t(969809),i=t(238957);let l=e=>e?(0,o.Z)(e.toUpperCase()):"OTHER",s=e=>e.isPaid?"paid":e.isInvite?"invite":e.isSocial?"social":e.isSEO?"seo":e.utmSource?`utm_${e.utmSource}`:"direct",r=e=>e&&"string"==typeof e?(0,a.$K)(e)?"pinterest":(0,a.dh)(e)?"instagram":/wechat|micromessenger/i.test(e)?"wechat":(0,a.ry)(e)||/facebook|fbav|fban|tiktok|twitter|line/i.test(e)?"social":"none":"none",d=(e,n,t)=>{let a=e?.countryFromHostName||e?.country||"",o=e?.userAgent?.raw||("undefined"!=typeof navigator?navigator.userAgent:""),d=(0,i.iU)();return{country:a,userAgent:o,referrer:e?.referrerFromHeader||e?.referrerFromCookie||"",unauthID:e?.unauthId||"",region:l(a),channel:s(n),iab:r(o),deviceType:t,revisitationState:d,revisitationCount:d.count,daysSinceLastVisit:(e=>{let{ts:n}=e;if(!n||0===n)return 0;let t=new Date,a=new Date(n);return Math.max(Math.floor(Number(((t.getTime()-a.getTime())/864e5).toFixed(2))),0)})(d)}}},986523:function(e,n,t){t.d(n,{Z:()=>s});var a=t(667294);let o=()=>()=>{},i=()=>!1,l=()=>!0,s=()=>(0,a.useSyncExternalStore)(o,i,l)},932921:function(e,n,t){t.d(n,{H:()=>l,Z:()=>i});var a=t(935833),o=t(671220);async function i({filename:e,imgSrc:n,imageDownloadSuccessCallback:t,category:o,pinId:i,viewParameter:l,viewType:s,isUnauth:r=!1,platform:d="web",expName:u,expGroup:_},p){return"undefined"==typeof window?Promise.resolve():((0,a.My)("web.download.click",{category:o||"no_category",authType:r?"unauth":"auth",platform:d,viewType:s,expName:u,expGroup:_}),p({event_type:82,object_id_str:i,view_type:s||3,view_parameter:l||139}),n&&document)?fetch(n,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then(e=>e.blob()).then(n=>{let i=document.createElement("a");i.href=window.URL.createObjectURL(n),e&&i.setAttribute("download",e.replace(".","_")),i.style.display="none",document.body?.appendChild(i),i.click(),document.body?.removeChild(i),(0,a.My)("web.download.success",{category:o||"no_category",authType:r?"unauth":"auth",platform:d,viewType:s,expName:u,expGroup:_}),t?.()}).catch(()=>{throw(0,a.My)("web.download.failure",{category:o||"no_category",authType:r?"unauth":"auth",platform:d,viewType:s,expName:u,expGroup:_}),Error("Download image error")}):Promise.resolve()}let l=(e,n)=>{let{downloadCount:t=0,upsellDispatch:a,isAuthenticated:i,updateDownloadCount:l}=n||{};if(i)return{limitReached:!1,oldCount:0,newCount:0};if(e("unuath_download_paywalled").anyEnabled||e("unauth_combined_download_exp").anyEnabled)return{limitReached:!0,oldCount:0,newCount:0};let s=t>=1,r=s?t:t+1;return t!==r&&a&&(a((0,o.Dw)(r)),l?.()),{limitReached:s,oldCount:t,newCount:r}}},2061:function(e,n,t){t.d(n,{Yg:()=>r,ib:()=>u,nF:()=>p,xX:()=>_});var a=t(501010),o=t(774838),i=t(739405),l=t(767415);let s=({checkExperiment:e})=>{let{group:n}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,t)=>(0,l.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:n,...t}})}},r=()=>{let{isAuthenticated:e}=(0,o.B)(),n=(0,i.HG)(),{checkExperiment:t}=(0,a.Z)();return e&&!n?s({checkExperiment:t}):{logStat:()=>{}}},d=0,u=({checkExperiment:e,isAuthMweb:n})=>{if(!n)return;let{logStat:t}=s({checkExperiment:e});(d+=1)<10&&t(`repin_${d}`)};function _({checkExperiment:e,isDesktop:n,isAuthenticated:t}){if(!t)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1};if(n){let{anyEnabled:n}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:n,isGraphQLEnabledInGeneral:n,shouldPrefetchCloseupPreviewFragment:!1}}{let{anyEnabled:n,group:t}=e("auth_mweb_graphql_pin_page");switch(t){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0};case"only_closeup":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1};case"only_related_pins":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1};default:return{isGraphQLEnabledInGeneral:n,isGraphQLEnabledForRelatedPins:n,shouldPrefetchCloseupPreviewFragment:!1}}}}function p(){let{checkExperiment:e}=(0,a.Z)(),n=(0,i.HG)(),{isAuthenticated:t}=(0,o.B)();return _({checkExperiment:e,isDesktop:n,isAuthenticated:t})}},163691:function(e,n,t){t.d(n,{Z:()=>a});let a=function(e){return{...e,ts:Date.now()}}},238957:function(e,n,t){t.d(n,{K7:()=>r,Vd:()=>u,WT:()=>s,iU:()=>d});var a=t(4533),o=t(994507),i=t(34550),l=t(163691);let s=18e5,r=o.dm,d=()=>{try{let{count:e,time:n,ts:t}=(0,i.M0)().getItem(a.SI)??{};if("number"==typeof e&&"number"==typeof n&&"number"==typeof t)return{count:e,time:n,ts:t};throw Error("Invalid revisitation data")}catch(e){return(0,o.dm)()}},u=e=>{(0,i.M0)().setItem(a.SI,(0,l.Z)(e))}},658375:function(e,n,t){t.d(n,{C:()=>l,P:()=>i});var a=t(173874),o=t(767415);let i=()=>!1,l=e=>{(0,a.LM)(e)&&!i()&&(0,o.nP)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/51723-fd470a45d32712a0.mjs.map