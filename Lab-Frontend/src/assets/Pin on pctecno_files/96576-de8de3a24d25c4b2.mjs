(self.modernJsonp=self.modernJsonp||[]).push([["96576"],{127078:function(e,a,n){n.d(a,{EJ:()=>p,EX:()=>c,Ig:()=>f,Jy:()=>g,YS:()=>k,ZP:()=>x,a3:()=>_,al:()=>S,dk:()=>y,hO:()=>m,kH:()=>b,nN:()=>h,z6:()=>v});var r=n(667294),t=n(581722),i=n(994507),o=n(784548),l=n(79271);let u=Date.now(),s=()=>(0,l.OC)(),d=()=>Date.now()-u,c=()=>(0,t.v9)(e=>e.currentUserTracker?.storageAccessAllowed??i.iN),p=()=>(0,t.v9)(e=>e.currentUserTracker?.visitedUnauthPages??i.PW),g=()=>(0,t.v9)(e=>e.currentUserTracker?.closeupPins??i.tf),_=()=>(0,t.v9)(e=>e.currentUserTracker?.completedSearches??i.fE),b=()=>(0,t.v9)(e=>e.currentUserTracker?.clickthroughPins??i.iK),m=()=>(0,t.v9)(e=>e.currentUserTracker?.savedPins??i.pn),v=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.$y)(a))},[e])},k=()=>{let e=(0,t.I0)();return(0,r.useCallback)((a,n)=>{e((0,o.bj)(a,n))},[e])},h=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.x1)(a))},[e])},f=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.tb)(a))},[e])},y=()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.am)(a))},[e])},S=()=>{let e=(0,t.I0)();return(0,r.useCallback)(()=>{e((0,o.AU)())},[e])},x=()=>{let e=(0,t.v9)(e=>e.currentUserTracker?.isAuthenticated??i.MK),a=(0,t.v9)(e=>e.currentUserTracker?.country??i.UF),n=(0,t.v9)(e=>e.currentUserTracker?.region??i.fu),l=c(),u=p(),x=g(),w=_(),U=b(),E=(0,t.v9)(e=>e.currentUserTracker?.downloadedPinsCount??i.cH),P=m(),M=(0,t.v9)(e=>e.currentUserTracker?.isQUS??i.R8),C=(0,t.v9)(e=>e.currentUserTracker?.revisitationState??(0,i.dm)()),L=(0,t.v9)(e=>e.currentUserTracker?.daysSinceLastRevisitation??i.ne),A=k(),G=h(),T=f(),I=y(),D=S();return{isAuthenticated:e,isStorageAllowed:l,isQUS:M,closeupPins:x,visitedPages:u,setVisitedPage:A,completedSearches:w,setCompletedSearch:G,removeCompletedSearch:T,clickthroughPins:U,setClickthroughPin:I,downloadCount:E,updateDownloadCount:D,savedPins:P,setSavedPins:(()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.pv)(a))},[e])})(),revisitationState:C,daysSinceLastRevisitation:L,updateRevisitation:(()=>{let e=(0,t.I0)();return(0,r.useCallback)(a=>{e((0,o.VD)(a))},[e])})(),initCurrentUserTracker:v(),getPinImpressionCount:s,getSessionDuration:d,country:a,region:n}}},839603:function(e,a,n){n.d(a,{Et:()=>t,G0:()=>l,HG:()=>g,I_:()=>r,Ki:()=>s,ON:()=>k,PB:()=>p,Sz:()=>d,XF:()=>i,Xq:()=>c,ZG:()=>u,_r:()=>m,s5:()=>o,tO:()=>b,xP:()=>v,zk:()=>_});let r="var(--comp-button-color-background-primary-default)",t="var(--comp-button-color-background-secondary-default)",i="var(--comp-button-color-background-tertiary-semi-transparent-default)",o="var(--comp-button-color-hover-background-primary-default)",l="var(--comp-button-color-hover-background-secondary-default)",u="var(--comp-button-color-hover-background-tertiary-default)",s="var(--comp-button-color-hover-background-shopping-default)",d="var(--comp-button-color-hover-background-light-default)",c="var(--comp-button-color-hover-background-tertiary-semi-transparent-default)",p="var(--comp-button-color-hover-background-transparent-default)",g="var(--comp-progressbar-color-background-bar-unfilled)",_="var(--comp-progressbar-color-background-bar-default)",b="var(--comp-progressbar-color-background-bar-success)",m="var(--comp-progressbar-color-background-bar-warning)",v="var(--comp-progressbar-color-background-bar-error)",k="var(--comp-bannerslim-color-background-recommendation-expanded)"},20717:function(e,a,n){n.d(a,{$p:()=>w,_l:()=>U,cO:()=>x,t2:()=>E,w2:()=>P,xM:()=>S});var r=n(686659),t=n(667294),i=n(312048),o=n(935059),l=n(173874),u=n(501010),s=n(774838),d=n(661376),c=n(575820),p=n(739405),g=n(785893);let _="UnauthDesktopSocialPinLandingPageContext",b="UnauthMobileSocialPinLandingPageContext",m="AthDesktopSocialPinLandingPageContext",v="AuthMobileSocialPinLandingPageContext",k=(0,t.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},hasDismissedGradientUpsell:!1,setHasDismissedGradientUpsell:()=>{},isGradientUpsellTriggerInView:!1,setIsGradientUpsellTriggerInView:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),h=({children:e})=>{let[a,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[u,s]=(0,t.useState)(!1),[d,c]=(0,t.useState)(!1),[p,_]=(0,t.useState)(""),b=(0,t.useMemo)(()=>({hasSeenAuthMobileLandingToast:a,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:r,setHasSeenAuthDesktopLandingToast:i,hasDismissedGradientUpsell:o,setHasDismissedGradientUpsell:l,hasDismissedLoginModal:u,setHasDismissedLoginModal:s,isGradientUpsellTriggerInView:d,setIsGradientUpsellTriggerInView:c,pinImageUrl:p,setPinImageUrl:_}),[a,r,o,l,u,s,d,c,p,_]);return(0,g.jsx)(k,{value:b,children:e})},f=(0,t.createContext)({key:"",data:null}),y=({children:e})=>{let a=(0,i.TH)(),{isSocialBot:n,isBot:r}=(0,s.B)(),h=(0,o.Z)(),y=h&&h.isAuth,S=(0,p.HG)(),x=(0,t.useMemo)(()=>(0,l.fY)(a)&&(0,c.mB)(a.search).invite_code||"",[a]),w=(0,t.useMemo)(()=>{if(!((0,l.gf)(a)||(0,l.Xn)(a)))return"";let e=(0,c.mB)(a.search);if(e.invite_code)return e.invite_code;let n=e.from;if(!n)return"";let r=(0,c.Jx)(n).split("?")[1]||"";return r&&(0,c.mB)(r).invite_code||""},[a]),U=(0,t.useMemo)(()=>{let e=(0,i.LX)({path:"/pin/:id"},a.pathname);return String(e&&"id"in e.params&&e.params.id)||""},[a.pathname]),[E,P]=(0,t.useState)({key:"",data:null}),[M,C]=(0,t.useState)(!1),L=!y&&S,A=!y&&!S,{checkExperiment:G}=(0,u.Z)(),{hasDismissedLoginModal:T}=(0,t.useContext)(k),I=!r&&!n&&A&&x,{inDwebFullPageModalExp:D,dWebFullPageModalExpGroup:H,inDwebSocialModalUpdateExp:N,dWebSocialModalUpdateExpGroup:R,inDwebUnauthSocialPinLandingExp:F,unauthDwebSocialPinLandingGroup:Z,inMwebUnauthRelatedPinsLimitExp:j,unauthMwebRelatedPinsLimitGroup:B,inMwebUnauthSocialPinLandingSecondaryUpsellExp:J,unauthMwebSocialPinLandingSecondaryUpsellGroup:O,inMwebSocialFeatureEducationExp:X,mwebSocialFeatureEducationExpGroup:z,inMwebLoginSignupPageExp:K,unauthMwebLoginSignupPageExpGroup:V}=(0,t.useMemo)(()=>{let e=!r&&!n&&L&&x&&(()=>{let e=G("ce_dweb_unauth_splp_blocking",{dangerouslySkipActivation:!0}),a=G("ce_dweb_unauth_splp_blocking_12s",{dangerouslySkipActivation:!0});return e.anyEnabled?e:a})()||{anyEnabled:!1,group:void 0},a=!r&&!n&&L&&x&&G("ce_dweb_unauth_splp_modal_update",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},t=!r&&!n&&L&&x&&G("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},i=!r&&!n&&A&&x&&G("ce_mweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},o=I&&T&&G("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0},l=!r&&!n&&A&&(w||x)&&G("ce_mweb_unauth_social_feature_education")||{anyEnabled:!1,group:void 0},u=!r&&!n&&A&&(w&&G("ce_mweb_unauth_splp_signup_banner")||x&&G("ce_mweb_unauth_splp_signup_banner",{dangerouslySkipActivation:!0}))||{anyEnabled:!1,group:void 0};return{inDwebFullPageModalExp:e.anyEnabled,dWebFullPageModalExpGroup:e.group,inDwebSocialModalUpdateExp:a.anyEnabled,dWebSocialModalUpdateExpGroup:a.group,inDwebUnauthSocialPinLandingExp:t.anyEnabled,unauthDwebSocialPinLandingGroup:t.group,inMwebUnauthRelatedPinsLimitExp:i.anyEnabled,unauthMwebRelatedPinsLimitGroup:i.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:o.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:o.group,inMwebSocialFeatureEducationExp:l.anyEnabled,mwebSocialFeatureEducationExpGroup:l.group,inMwebLoginSignupPageExp:u.anyEnabled,unauthMwebLoginSignupPageExpGroup:u.group,showMwebDefaultModalUpsellOnLand:I}},[r,n,L,A,x,w,G,T,I]),W=x||w,Y="default";"enabled_popover_profile"===Z?Y="default_with_sender_recent_pins":X&&(Y="default_with_social_feature_education");let $=(0,d.Z)(W?{name:"InviteCodeMetadataResource",options:{invite_code:W,field_set_key:Y}}:null),q=$.isLoaded?$.data:null;(0,t.useEffect)(()=>{if(q){let e=q.sender??null,a=y&&e.id!==h.id&&e?.should_show_messaging&&h.should_show_messaging;if(L&&e){let a=null,n=null;F||R?(a={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:Z,inviterRecentPins:"enabled_popover_profile"===Z&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===Z&&e.username||""},R&&(a.socialModalUpdateExpGroup=R)):D?n={inDwebFullPageModalExp:D,isFullPageModalDismissed:M,setIsFullPageModalDismissed:C}:a=[5,9,12,16].includes(q.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},P({key:_,data:{inviter:e,popoverData:a,modalData:n}})}else if(A&&e){let a=I||B;if(a||K||X){let n={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,showDefaultUpsell:!!a};J&&(n.secondaryExpGroup=O),B&&(n.limitedRelatedPinsExpGroup=B),X&&!e.is_private_profile&&(n.socialFeatureEducationExpGroup=z),K&&(n.loginSignupPageExpGroup=V),P({key:b,data:{upsellData:n}})}}else a&&!S?P({key:v,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:h.id||""},pin:{pinId:U}}}}):a&&S&&P({key:m,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:h.id||""},pin:{pinId:U}}}})}else P({key:"",data:null})},[q,y,S,U,h,D,H,N,R,F,A,Z,L,j,B,J,O,X,z,K,V,M,I]);let Q=(0,t.useMemo)(()=>E,[E]);return(0,g.jsx)(f,{value:Q,children:e})},S=({children:e})=>((0,t.useEffect)(()=>{(0,r.Z)("SocialPinLandingPageContext","/app/www/lib/SocialPinLandingPageContext.tsx")},[]),(0,g.jsx)(h,{children:(0,g.jsx)(y,{children:e})})),x=()=>{let e=(0,t.useContext)(f);return e.key===_?e:null},w=()=>{let e=(0,t.useContext)(f);return e.key===b?e:null},U=()=>{let e=(0,t.useContext)(f);return e.key===v?e:null},E=()=>{let e=(0,t.useContext)(f);return e.key===m?e:null},P=()=>(0,t.useContext)(k)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/96576-de8de3a24d25c4b2.mjs.map