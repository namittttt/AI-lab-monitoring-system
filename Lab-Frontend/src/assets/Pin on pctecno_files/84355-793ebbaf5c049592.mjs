(self.modernJsonp=self.modernJsonp||[]).push([["84355"],{53596:function(e,o,r){r.d(o,{Z:()=>a});let a='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},711072:function(e,o,r){r.d(o,{Z:()=>t});var a=r(667294);let t=function(e,o){let r=(0,a.useRef)(e),t=(0,a.useRef)(void 0),i=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{r.current=e},[e]),(0,a.useEffect)(()=>()=>{t.current&&clearTimeout(t.current)},[o]);let l=(0,a.useCallback)((...e)=>{i.current=e,t.current&&clearTimeout(t.current),t.current=window.setTimeout(()=>{r.current(...e),i.current=void 0},o)},[o]);return l.flush=(0,a.useCallback)(()=>{if(t.current&&(clearTimeout(t.current),t.current=void 0),i.current){let e=i.current;return i.current=void 0,r.current(...e)}},[]),l.cancel=(0,a.useCallback)(()=>{t.current&&(clearTimeout(t.current),t.current=void 0),i.current=void 0},[]),l}},718846:function(e,o,r){r.d(o,{Z:()=>l});var a=r(935059),t=r(200619),i=r(601871);let l=()=>{let e=(0,a.Z)(),o=(0,t.Z)();return(0,i.lJ)(e,o)}},233165:function(e,o,r){r.d(o,{Z:()=>C});var a=r(686659),t=r(667294),i=r(581722),l=r(20256),s=r(249459),n=r(935059),d=r(24246),c=r(501010),h=r(352507),_=r(601871),m=r(282140),b=r(211731),u=r(427475),g=r(785893);function p(e,o,r){var a;return(o="symbol"==typeof(a=function(e,o){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,o||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?a:a+"")in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}class x extends t.Component{constructor(...e){super(...e),p(this,"handleSubmit",e=>{let{advertiserId:o,boardCreateSource:r,createBoard:a,onBoardCreate:t,viewer:i,orbacActingAs:l,shouldShowAddCollaborators:s,handleInviteSelectedCollaborators:n}=this.props,d=(0,_.lJ)(i,l),{name:c,description:h,privacy:m,collab_board_email:b,collaborator_invites_enabled:u}=e;return a({boardCreateOptions:{name:c,description:h,privacy:m,collab_board_email:b,collaborator_invites_enabled:u,aux_data:{source:r},...o?{advertiser_id:o}:{},...d?{orbac_subject_id:d}:Object.freeze({})}}).then(e=>{s&&n(e.id),t(e)})}),p(this,"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:this.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,_.Ms)(this.props.viewer,this.props.orbacActingAs)},pin_count:0})}render(){let{advertiserId:e,isAdAccountOwner:o,i18n:r,onClose:a,privacy:t,useModalWithNoLayer:i,showSecretBoardCreateToggle:n,shouldShowAddCollaborators:d,setSelectedContacts:c,selectedContacts:h,shouldUseOverlayPanel:b,orbacActingAs:u,viewer:p}=this.props,x=(0,_.lJ)(p,u),C=r._('Create board', 'BoardCreate.BoardCreate', 'Modal heading');return(0,g.jsx)(m.Z,{board:{...this.emptyBoardData,...{privacy:o?t:s.Z.BoardPrivacy.PROTECTED}},currentUserIsOwner:!0,isAdAccount:!!e,isAdAccountOwner:o,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,isProfilePublisher:!!x,onClose:a,onSubmit:this.handleSubmit,overlayPanelHeadingText:C,selectedContacts:h,setSelectedContacts:c,shouldShowAddCollaborators:d,shouldUseOverlayPanel:b,showSecretBoardCreateToggle:n,submitText:this.props.i18n._('Create', ' - ', ' -- '),title:(0,g.jsx)(l.xu,{paddingY:8,width:"100%",children:(0,g.jsx)(l.X6,{align:"center",size:"600",children:C})}),useModalWithNoLayer:i})}}function C(e){(0,t.useEffect)(()=>{(0,a.Z)("BoardCreate","/app/www/BoardCreate/BoardCreate.tsx")},[]);let o=(0,u.Z)(),r=(0,d.Z)(),{checkExperiment:l}=(0,c.Z)(),s=(0,n.Z)(),_=(0,i.v9)(({advertiser:e})=>e?e.id:void 0),m=(0,h.Z)(),p=(0,i.v9)(({advertiser:e})=>!e||s.isAuth&&e.owner_user_id===s.id),C=(0,b.zC)(),v=(0,b.DK)(),[f,B]=(0,t.useState)([]);return(0,g.jsx)(x,{...e,advertiserId:_,createBoard:o,dispatch:(0,i.I0)(),handleInviteSelectedCollaborators:e=>{let o=f.filter(e=>"email"===e.type||"email_share_suggestion"===e.type),r=f.filter(e=>"user"===e.type||"user_share_suggestion"===e.type);r.length>0&&v(e,r.map(e=>e.id)),o.length>0&&C(e,o.map(e=>e.id))},i18n:r,isAdAccountOwner:p,orbacActingAs:m,selectedContacts:f,setSelectedContacts:B,shouldUseOverlayPanel:l("web_board_create_overlay_panel").anyEnabled,viewer:s})}p(x,"defaultProps",{privacy:s.Z.BoardPrivacy.PUBLIC})},282140:function(e,o,r){r.d(o,{Z:()=>J});var a=r(686659),t=r(667294),i=r(20256),l=r(236269),s=r(465784),n=r(289935),d=r(24246),c=r(216975),h=r(501010),_=r(774838),m=r(317109),b=r(577356),u=r(739405),g=r(496883),p=r(464094),x=r(389222),C=r(983141),v=r(771729),f=r(785893);function B({selectedContacts:e=[],setSelectedContacts:o}){(0,t.useEffect)(()=>{(0,a.Z)("BoardCreateAddCollaborators","/app/www/BoardCreate/BoardCreateAddCollaborators.tsx")},[]);let r=(0,d.Z)(),{searchValue:l,allContacts:s,handleTextFieldChange:n,handleTypeaheadSuggestionsChange:c,handleCollaboratorClick:h}=(0,v.Z)({selectedContacts:e||[],onSelectedContactsChange:o||(()=>{})}),_=e.map(e=>e.id);return(0,f.jsxs)(i.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,f.jsx)(i.xu,{paddingY:2,children:(0,f.jsx)(i.xv,{size:"100",children:r._('Add collaborators', 'text indicates that this section is for adding collaborators to a board', 'boardCreate.addCollaborators.heading')})}),(0,f.jsx)(i.xu,{marginBottom:4,marginTop:2,children:(0,f.jsx)(C.Z,{onSearchChange:n,onTypeaheadSuggestionsChange:c,searchValue:l})}),(0,f.jsx)(x.Z,{contacts:s,itemPadding:2,onCollaboratorToggle:h,selectedContactIds:_})]})}var j=r(925347),w=r(832333);let y=({label:e,labelId:o})=>o?(0,f.jsx)(i.__,{htmlFor:o,children:(0,f.jsx)(i.xv,{size:"100",children:e})}):(0,f.jsx)(t.Fragment,{children:e});function P(e){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormRow","/app/www/BoardForm/BoardFormRow.tsx")},[]);let{children:o,label:r,labelId:l}=e;return(0,f.jsxs)(t.Fragment,{children:[(0,f.jsx)(i.xu,{marginBottom:2,children:(0,f.jsx)(y,{label:r,labelId:l})}),o]})}function A({coverPin:e,handleShowBoardCoverEditModal:o}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormBoardCoverButton","/app/www/BoardForm/BoardFormBoardCoverButton.tsx")},[]);let r=(0,d.Z)(),[l,s]=(0,t.useState)(!1),{isRTL:n}=(0,_.B)();return(0,f.jsx)(P,{label:(0,f.jsx)(i.X6,{accessibilityLevel:3,size:"200",children:(0,f.jsx)(i.xv,{inline:!0,size:"100",children:r._('Board cover', 'BoardForm.BoardFormCoverButton', 'Form label for updating board cover')})}),children:(0,f.jsx)(i.xu,{position:"relative",width:138,children:(0,f.jsx)(i.iP,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onTap:o,rounding:4,children:e?.custom_cover?(0,f.jsxs)(t.Fragment,{children:[(0,f.jsx)(i.zd,{height:138,rounding:4,width:138,children:(0,f.jsx)(w.Z,{alt:e.image_url,color:"gray",customCover:e.custom_cover,height:138,imgPos:function(e){let{crop:o,size:r}=e||{};if(Array.isArray(o)&&Array.isArray(r))return{x:o[0]||0,y:o[1]||0,width:r[0]||0,height:r[1]||0}}(e),imgUrl:e.image_url||"",renderAsImage:!0,width:138})}),(0,f.jsx)(i.xu,{bottom:!0,left:n,padding:2,position:"absolute",right:!n,children:(0,f.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:l?"white":"rgba(255, 255, 255, 0.8)"}},display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,children:(0,f.jsx)(i.JO,{accessibilityLabel:r._('Edit board cover', 'BoardForm.BoardFormBoardCoverButton', 'Accessibility label on icon'),color:"default",icon:"edit",size:16})})})]}):(0,f.jsx)(i.xu,{alignItems:"center",color:l?"darkWash":"secondary",display:"flex",height:138,justifyContent:"center",rounding:4,width:138,children:(0,f.jsx)(i.JO,{accessibilityLabel:r._('Add cover photo', 'BoardForm.BoardFormCoverButton', 'Accessibility label on icon'),color:"default",icon:"add",size:24})})})})})}function E({children:e,label:o,labelId:r,subtext:l}){return(0,t.useEffect)(()=>{(0,a.Z)("BoardFormSettingsRow","/app/www/BoardForm/BoardFormSettingsRow.tsx")},[]),(0,f.jsx)(t.Fragment,{children:(0,f.jsxs)(i.xu,{alignItems:"center",display:"flex",justifyContent:"start",marginBottom:10,children:[e,(0,f.jsxs)(i.xu,{marginStart:2,children:[(0,f.jsx)(i.__,{htmlFor:r,children:(0,f.jsx)(i.xv,{size:"300",weight:"bold",children:o})}),l]})]})})}function z({hasCollabBoardEmail:e,isCollaborative:o,onCheckboxChange:r}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormCollaboratorsEmailCheckbox","/app/www/BoardForm/BoardFormCollaboratorsEmailCheckbox.tsx")},[]);let l=(0,d.Z)();return o&&(0,f.jsx)(E,{label:l._('Email notifications', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Form label'),labelId:"emailNotificationsCheckbox",subtext:(0,f.jsx)(i.xv,{color:"subtle",size:"300",children:l._('Get an email when someone saves Pins to this board', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Text explaing field on board form')}),children:(0,f.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,f.jsx)(i.xu,{marginEnd:1,children:(0,f.jsx)(i.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:r})})})})}var F=r(380938),S=r(319226),k=r(755559);function I({board:e,onCollaboratorInviteClick:o}){(0,t.useEffect)(()=>{(0,a.Z)("BoardCollaboratorsAndInviteSection","/app/www/boardEdit/BoardCollaboratorsAndInviteSection.tsx")},[]);let r=(0,d.Z)(),l=(0,k.Z)({boardId:e.id,ownerId:e.owner.id,ownerName:e.owner.full_name??"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""});return(0,f.jsxs)(i.kC,{alignItems:"center",justifyContent:"between",children:[(0,f.jsx)(S.HE,{collaborators:l.map(({name:e,src:o,color:r})=>({src:o?.endsWith("/default_75.png")?void 0:o,name:e,color:r})),size:"md"}),(0,f.jsx)(i.hU,{accessibilityLabel:r._('Invite collaborators', 'BoardEdit.BoardCollaboratorsAndInviteSection', 'Accessibility label on button'),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:o,size:"lg"})]})}function Z({board:e,onCollaboratorInviteClick:o}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormCollaboratorsInviteList","/app/www/BoardForm/BoardFormCollaboratorsInviteList.tsx")},[]);let r=(0,d.Z)(),l=(0,f.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[(0,f.jsx)(i.X6,{accessibilityLevel:3,size:"200",children:(0,f.jsx)(i.xv,{inline:!0,size:"100",children:r._('Collaborators', ' - ', ' -- ')})}),(0,f.jsx)(F.Z,{}),(0,f.jsx)(i.xv,{inline:!0,size:"100",weight:"bold",children:(0,f.jsx)(i.rU,{accessibilityLabel:r._('Learn more about creating and managing group boards.', 'BoardForm.BoardFormCollaboratorsInviteList', 'Accessibility label for link to learn more about group boards'),display:"inlineBlock",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",target:"blank",underline:"hover",children:r._('Learn more', ' - ', ' -- ')})})]});return(0,f.jsx)(P,{label:l,children:(0,f.jsx)(I,{board:e,onCollaboratorInviteClick:o})})}function T({collaboratorInvitesEnabled:e,isCollaborative:o,onCheckboxChange:r}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormCollaboratorsInviteToggle","/app/www/BoardForm/BoardFormCollaboratorsInviteToggle.tsx")},[]);let l=(0,d.Z)();return o&&(0,f.jsx)(E,{label:l._('Let collaborators add people', 'BoardForm.BoardFormCollaboratorsInviteToggle', 'Form label'),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,f.jsx)(i.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:r})})}function D({description:e,descriptionValidatorErrors:o,onChange:r}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormDescription","/app/www/BoardForm/BoardFormDescription.tsx")},[]);let l=(0,d.Z)(),s="boardEditDescription";return(0,f.jsx)(P,{label:l._('Description', 'BoardForm.BoardFormDescription', ' Form field label'),labelId:s,children:(0,f.jsx)(i.Kx,{errorMessage:o.join(", "),id:s,name:"description",onChange:r,placeholder:l._('What\'s your board about?', ' - ', ' -- '),value:e})})}let M=({children:e})=>((0,t.useEffect)(()=>{(0,a.Z)("BoardFormList","/app/www/BoardForm/BoardFormList.tsx")},[]),(0,f.jsx)(i.xu,{paddingX:8,role:"list",children:t.Children.map(e,(o,r)=>o&&(0,f.jsx)(i.xu,{marginBottom:r===t.Children.count(e)-1?1:8,role:"listitem",children:o},r))}));function L({name:e,nameValidatorErrors:o,onChange:r,disabled:l}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormTitleInput","/app/www/BoardForm/BoardFormTitleInput.tsx")},[]);let s=(0,d.Z)();return(0,f.jsx)(P,{label:s._('Name', 'BoardForm.BoardFormTitleInput', 'Form field label'),labelId:"boardEditName",children:(0,f.jsx)(i.nv,{disabled:l,errorMessage:o.join(", "),id:"boardEditName",name:"boardName",onChange:r,placeholder:s._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:e})})}let R=({board:e,collabBoardEmail:o,collaboratorInvitesEnabled:r,coverPin:l,currentUserIsOwner:s,description:n,descriptionValidatorErrors:c,handleBoardLeave:h,isCollaborative:_,showCoverEdit:m,name:b,nameValidatorErrors:u,handleShowBoardCoverEditModal:g,handleChangeName:p,handleChangeDescription:x,handleShowCollaboratorsModal:C,handleChangeCollabBoardEmail:v,handleChangeCollaboratorInvitesEnabled:B,shouldShowCollaboratorsInviteToggle:j})=>{(0,t.useEffect)(()=>{(0,a.Z)("AdsOnlyBoardFormFields","/app/www/BoardForm/AdsOnlyBoardFormFields.tsx")},[]);let w=(0,d.Z)();return(0,f.jsxs)(M,{children:[m&&(0,f.jsx)(A,{coverPin:l,handleShowBoardCoverEditModal:g}),(0,f.jsx)(L,{disabled:!0,name:b,nameValidatorErrors:u,onChange:p}),(0,f.jsx)(D,{description:n,descriptionValidatorErrors:c,onChange:x}),s&&!!h&&(0,f.jsx)(Z,{board:e,onCollaboratorInviteClick:C}),_&&(0,f.jsx)(i.xu,{marginBottom:-7,children:(0,f.jsx)(i.xv,{size:"100",children:w._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form')})}),(0,f.jsx)(z,{hasCollabBoardEmail:o,isCollaborative:_,onCheckboxChange:v}),j&&(0,f.jsx)(T,{collaboratorInvitesEnabled:r,isCollaborative:_,onCheckboxChange:B})]})};var N=r(249459);function O({isProtectedToggler:e,isToggleDisable:o,onChange:r,onCheckboxChange:l,privacy:s}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormPrivacyToggle","/app/www/BoardForm/BoardFormPrivacyToggle.tsx")},[]);let n=(0,d.Z)();if(!0===e)return(0,f.jsx)(E,{label:n._('Protected board (not listed on user\'s profile)', 'BoardForm.BoardFormSecretToggle', 'protected board'),labelId:"protected",children:(0,f.jsx)(i.xu,{paddingY:2,children:(0,f.jsx)(i.rs,{disabled:o,id:"protected",onChange:r,switched:s===N.Z.BoardPrivacy.PROTECTED})})});if(s!==N.Z.BoardPrivacy.PROTECTED){let e=n._('Keep this board secret', 'BoardForm.BoardFormSecretToggle', 'Caption for board settings to set visibility'),r=(0,f.jsx)(t.Fragment,{children:(0,f.jsxs)(i.xv,{color:"subtle",inline:!0,size:"300",children:[n._('So only you and collaborators can see it.', 'BoardForm.BoardFormSecretToggle', 'notifying the board owner only they and the collaborators can see the board if it set to secret')," ",(0,f.jsx)(i.rU,{accessibilityLabel:n._('Learn more about secret boards.', 'BoardForm.BoardFormPrivacyToggle.Link', 'Accessibility label for link to learn more about secret boards'),display:"inline",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",target:"blank",children:n._('Learn more', 'BoardForm.BoardFormSecretToggle', 'Link to learn more about secret boards')})]})});return(0,f.jsx)(E,{label:e,labelId:"secret",subtext:r,children:(0,f.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,f.jsx)(i.XZ,{checked:s===N.Z.BoardPrivacy.SECRET,disabled:o,id:"secret",name:"secret",onChange:l})})})}return null}function U({allowHomefeedRecommendations:e,onCheckboxChange:o}){(0,t.useEffect)(()=>{(0,a.Z)("BoardFormRecommendationToggle","/app/www/BoardForm/BoardFormRecommendationToggle.tsx")},[]);let r=(0,d.Z)();return(0,f.jsx)(E,{label:r._('Personalization', 'BoardForm.BoardFormRecommendationToggle', 'form label'),labelId:"recommendation",subtext:(0,f.jsx)(i.xv,{color:"subtle",size:"300",children:r._('Show Pins inspired by this board in your home feed.', 'BoardForm.BoardFormRecommendationToggle', 'Caption for board settings to set visibility')}),children:(0,f.jsx)(i.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:o})})}var H=r(659575);function X(e,o,r){var a;return(o="symbol"==typeof(a=function(e,o){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,o||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?a:a+"")in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}let V=(0,t.lazy)(()=>Promise.all([r.e("25418"),r.e("62460")]).then(r.bind(r,953144))),W=(0,t.lazy)(()=>Promise.all([r.e("5696"),r.e("12754")]).then(r.bind(r,87918))),Y=({condition:e,children:o})=>e?(0,f.jsx)(i.xu,{position:"absolute",zIndex:n.b7,children:o}):o;class G extends t.Component{constructor(e){super(e),X(this,"handleChangeName",({value:e})=>{let o=(0,g.FU)((0,H.D)(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:o})}),X(this,"handleChangeDescription",({value:e})=>{let o=(0,g.FU)((0,H.e)(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:o})}),X(this,"handleChangePrivacyToggle",({value:e})=>{let o="public";e&&(o=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==o&&this.setState({privacy:o})}),X(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),X(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),X(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),X(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),X(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),X(this,"handleCheckboxChange",e=>({event:o,checked:r})=>e({event:o,value:r})),X(this,"handleSubmit",e=>{let{onSubmit:o,shouldShowCollaboratorsInviteToggle:r}=this.props,{collab_board_email:a,collaboratorInvitesEnabled:t,description:i,name:s,privacy:n,allowHomefeedRecommendations:d}=this.state;if("preventDefault"in e&&e.preventDefault&&e.preventDefault(),this.submitDisabled())return;let c=s.trim(),h=i.trim();this.setState({submitting:!0,submitError:""}),o(r?{name:c,collab_board_email:a,collaborator_invites_enabled:t,description:h,privacy:n,allow_homefeed_recommendations:d}:{name:c,collab_board_email:a,description:h,privacy:n,allow_homefeed_recommendations:d}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let o=this.props.i18n._('Uh oh! Something went wrong.', ' - ', ' -- '),r=(0,l.Z)(e,"message");if(r){let a=(0,l.Z)(e,"message_detail");o=a?`${r} ${a}`:r}else"string"==typeof e&&(o=e);this.setState({submitting:!1,submitError:o})})}),X(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),X(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),X(this,"handleShowCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!0})}),X(this,"handleHideCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!1})}),X(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();let{onCropChange:o}=this.props;o&&o(e)});let{board:{collab_board_email:o,collaborator_invites_enabled:r,description:a,name:t,pin_count:i,privacy:s,allow_homefeed_recommendations:n}}=e;this.state={collab_board_email:o,description:a,name:t,pin_count:i,privacy:s,allowHomefeedRecommendations:n,collaboratorInvitesEnabled:r,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:t,previousDescription:a,previousPrivacy:s}}static getDerivedStateFromProps(e,o){let r={};return e.board.name&&e.board.name!==o.previousName&&(r.previousName=e.board.name,r.nameValidatorErrors=(0,g.FU)((0,H.D)(e.i18n),e.board.name)),e.board.description&&e.board.description!==o.previousDescription&&(r.previousDescription=e.board.description,r.descriptionValidatorErrors=(0,g.FU)((0,H.e)(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==o.previousPrivacy&&(r.previousPrivacy=e.board.privacy),r}getFormFooter(){let{submitText:e}=this.props,{submitError:o}=this.state;return(0,f.jsxs)(t.Fragment,{children:[(0,f.jsx)(i.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,f.jsx)(i.xu,{children:(0,f.jsx)(i.kC,{alignItems:"stretch",justifyContent:"start",children:(0,f.jsx)(i.xu,{height:48,children:(0,f.jsx)(i.zx,{color:"red",dataTestId:"board-form-submit-button",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),o&&(0,f.jsx)(i.xu,{"aria-live":"polite",paddingX:1,tabIndex:0,children:(0,f.jsx)(i.xv,{color:"error",children:o})})]})}submitDisabled(){let{descriptionValidatorErrors:e,name:o,nameValidatorErrors:r,submitting:a}=this.state;return!o||r.length>0||e.length>0||a}render(){let{board:e,board:{archived_by_me_at:o,cover_pin:r,id:a,is_collaborative:l},coverImageHeight:d,coverImageWidth:h,currentUserIsOwner:_,handleBoardLeave:b,isAdAccount:u,isAdAccountOwner:g,isDeletable:x,isDesktop:C,isEditable:v,isNameAndSecretView:w,onClose:y,onDeleteButtonClick:P,requestContext:E,title:F,useModalWithNoLayer:S,showSecretBoardCreateToggle:k,shouldShowAddCollaborators:I,shouldShowCollaboratorsInviteToggle:N,setSelectedContacts:H,selectedContacts:X,isProfilePublisher:G,shouldUseOverlayPanel:J}=this.props,{allowHomefeedRecommendations:q,collab_board_email:K,collaboratorInvitesEnabled:$,description:Q,descriptionValidatorErrors:ee,name:eo,nameValidatorErrors:er,pin_count:ea,privacy:et,showBoardCoverEdit:ei,showCollaboratorsModal:el,showSecretConfirmation:es}=this.state,en=v&&ea>0,ed=e.is_ads_only,ec=(0,f.jsxs)(M,{children:[en&&(0,f.jsx)(A,{coverPin:r,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,f.jsx)(L,{disabled:ed,name:eo,nameValidatorErrors:er,onChange:this.handleChangeName}),(0,f.jsx)(D,{description:Q,descriptionValidatorErrors:ee,onChange:this.handleChangeDescription}),_&&!!b&&(0,f.jsx)(Z,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,f.jsxs)(i.pg,{legend:this.props.i18n._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form'),children:[(0,f.jsx)(O,{isProtectedToggler:!!u,isToggleDisable:!!u&&!g&&!G,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:et}),!o&&(0,f.jsx)(U,{allowHomefeedRecommendations:q,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,f.jsx)(z,{hasCollabBoardEmail:K,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),N&&(0,f.jsx)(T,{collaboratorInvitesEnabled:$,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)})]}),x&&(0,f.jsxs)(i.xu,{marginTop:-15,paddingY:4,children:[(0,f.jsx)(i.X6,{accessibilityLevel:3,size:"200",children:(0,f.jsx)(i.xv,{inline:!0,size:"100",children:this.props.i18n._('Action', 'BoardForm.BoardForm.Action', 'Section heading in board edit form')})}),(0,f.jsxs)(i.iP,{onTap:P,children:[(0,f.jsx)(i.xu,{"data-test-id":"deleteBoardButton",marginBottom:1,marginTop:2,children:(0,f.jsx)(i.X6,{accessibilityLevel:4,size:"400",children:this.props.i18n._('Delete board', 'BoardForm.Delete', 'Delete board label')})}),(0,f.jsx)(i.xv,{color:"subtle",size:"300",children:(0,c.nk)(this.props.i18n._('You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }}  days to restore a deleted Board. After that, it will be permanently deleted.', 'boardForm.delete.helperText', 'Delete board warning text'),{MAX_AGE_RECENTLY_DELETED_BOARD:p.Xq})})]})]})]});_?w&&(ec=(0,f.jsxs)(M,{children:[(0,f.jsx)(L,{disabled:ed,name:eo,nameValidatorErrors:er,onChange:this.handleChangeName}),!k&&(0,f.jsx)(O,{isProtectedToggler:!!u,isToggleDisable:!!u&&!g&&!G,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:et}),I&&(0,f.jsx)(B,{selectedContacts:X,setSelectedContacts:H})]})):ec=(0,f.jsxs)(M,{children:[!!b&&(0,f.jsx)(Z,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,f.jsx)(z,{hasCollabBoardEmail:K,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!o&&ed&&(0,f.jsx)(U,{allowHomefeedRecommendations:q,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,f.jsx)(i.xv,{color:"subtle",size:"300",children:(0,c.nk)(this.props.i18n._('Only the board\u2019s owner ({{ boardOwner }}) can manage the rest of its features', 'BoardForm.CollaboratorPermissionsCopy', 'Copy on board edit form letting collaborators know of their permissions on a board'),{boardOwner:(0,f.jsx)(i.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});let eh=S?i.u_:s.ZP,e_=this.props.i18n._('Change board cover', 'BoardForm.BoardCoverEdit.heading', 'Change board cover heading'),em=(0,f.jsxs)(i.xu,{paddingY:8,position:"relative",children:[(0,f.jsx)(i.X6,{align:"center",size:"600",children:e_}),(0,f.jsx)(i.xu,{left:E.isRTL,paddingX:6,paddingY:8,position:"absolute",right:!E.isRTL,top:!0,children:(0,f.jsx)(i.hU,{accessibilityLabel:this.props.i18n._('Cancel change board cover', 'BoardForm.BoardCoverEdit.cancel', 'Cancel change board cover heading'),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]}),eb=this.props.i18n._('Board form', 'BoardForm.BoardForm', 'Accessibility label on board form'),eu=(0,f.jsx)(i.xu,{"data-test-id":"board-form-container",marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,f.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!ed&&ec,ed&&(0,f.jsx)(R,{board:e,collabBoardEmail:K,collaboratorInvitesEnabled:$,coverPin:r,currentUserIsOwner:_,description:Q,descriptionValidatorErrors:ee,handleBoardLeave:b,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),handleChangeDescription:this.handleChangeDescription,handleChangeName:this.handleChangeName,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,isCollaborative:l,name:eo,nameValidatorErrors:er,shouldShowCollaboratorsInviteToggle:N,showCoverEdit:en})]})}),eg=J?(0,f.jsx)(i.mh,{zIndex:n.b7,children:(0,f.jsx)(i.To,{accessibilityLabel:eb,closeOnOutsideClick:!0,footer:this.getFormFooter(),heading:this.props.overlayPanelHeadingText,onDismiss:y,size:"sm",children:eu})}):(0,f.jsx)(Y,{condition:!!S,children:(0,f.jsx)(eh,{accessibilityModalLabel:eb,footer:this.getFormFooter(),heading:F,onDismiss:y,size:"sm",children:eu})});return(0,f.jsxs)(t.Fragment,{children:[!ei&&!el&&eg,ei&&C&&(0,f.jsx)(m.Z,{children:(0,f.jsx)(V,{boardId:a,boardName:eo,coverPinId:r?.pin_id,frameHeight:d,frameWidth:h,heading:em,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),es&&(0,f.jsx)(j.Z,{confirmButtonLabel:this.props.i18n._('Make secret', 'Setting the boards visibility to secret', 'Setting the boards visibility to secret'),heading:this.props.i18n._('Are you sure?', 'Warning label asking users to be sure of their action', 'Warning label asking users to be sure of their action'),message:this.props.i18n._('If you make this board secret, some active ads will stop running', 'Explicitly warning users of the board visibility action they are doing', 'Explicitly warning users of the board visibility action they are doing'),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),el&&(0,f.jsx)(m.Z,{children:(0,f.jsx)(W,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})})]})}componentDidMount(){(0,a.Z)("BoardForm","/app/www/BoardForm/BoardForm.tsx")}}function J(e){(0,t.useEffect)(()=>{(0,a.Z)("BoardForm","/app/www/BoardForm/BoardForm.tsx")},[]);let o=(0,d.Z)(),r=(0,u.ZP)(),{checkExperiment:i}=(0,h.Z)(),l=!i("sg_hide_collab_invite_on_edit_modal").anyEnabled;return(0,f.jsx)(G,{...e,i18n:o,isDesktop:"desktop"===r,requestContext:(0,_.B)(),shouldShowCollaboratorsInviteToggle:l,toastManagerContext:(0,b.dI)()})}X(G,"defaultProps",{isNameAndSecretView:!1})},925347:function(e,o,r){r.d(o,{Z:()=>d});var a=r(686659),t=r(667294),i=r(20256),l=r(465784),s=r(24246),n=r(785893);function d({cancelButtonLabel:e,confirmButtonLabel:o,heading:r,message:d,onCancel:c,onConfirm:h}){(0,t.useEffect)(()=>{(0,a.Z)("BoardEditConfirmation","/app/www/boardEdit/BoardEditConfirmation.tsx")},[]);let _=(0,s.Z)(),m=r||_._('Are you sure?', ' - ', ' -- '),b=e||_._('Cancel', ' - ', ' -- ');return(0,n.jsx)(l.ZP,{accessibilityModalLabel:m,footer:(0,n.jsxs)(i.xu,{marginEnd:-1,marginStart:-1,children:[(0,n.jsx)(i.xu,{"data-test-id":"cancel-button",padding:1,children:(0,n.jsx)(i.zx,{fullWidth:!0,onClick:c,size:"lg",text:b})}),(0,n.jsx)(i.xu,{"data-test-id":"confirm-button",padding:1,children:(0,n.jsx)(i.zx,{color:"red",fullWidth:!0,onClick:h,size:"lg",text:o})})]}),heading:m,onDismiss:c,role:"alertdialog",children:(0,n.jsx)(i.xu,{padding:4,children:(0,n.jsx)(i.xv,{children:d})})})}},755559:function(e,o,r){r.d(o,{I:()=>s,Z:()=>l});var a=r(661376),t=r(718846);let i=({boardId:e,ownerId:o,ownerUsername:r,ownerName:i,ownerImgSrc:l})=>{let s=(0,t.Z)(),{data:n,isLoaded:d}=(0,a.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...s?{orbac_subject_id:s}:{}}}),c=[{id:o,name:i,src:l,href:`/${r}/`,isDim:!1}];return d&&n&&n.length>0&&n.forEach(e=>{c.push({id:e.invited_user?e.invited_user.id:"",name:e&&e.invited_user?e.invited_user.full_name:"",color:e&&e.invited_user?e.invited_user.avatar_color_index:void 0,src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),c},l=i;function s({children:e,...o}){return e(i(o))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/84355-793ebbaf5c049592.mjs.map